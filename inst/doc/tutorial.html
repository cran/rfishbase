<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Carl Boettiger" />

<meta name="date" content="2016-07-21" />

<title>rfishbase 2.0</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">rfishbase 2.0</h1>
<h4 class="author"><em>Carl Boettiger</em></h4>
<h4 class="date"><em>2016-07-21</em></h4>



<p>Welcome to <code>rfishbase 2.0</code>. This package is a ground-up rewrite of the original <code>rfishbase</code> package described in <a href="http://www.carlboettiger.info/assets/files/pubs/10.1111/j.1095-8649.2012.03464.x.pdf">Boettiger et al. (2012)</a>, and is not backwards compatible with the original. The first version of <code>rfishbase</code> relied on the XML summary pages provided by FishBase, which contained relatively incomplete data and have since been deprecated. The package later added functions that relied on HTML scraping of fishbase.org, which was always slow, subject to server instabilities, and carried a greater risk of errors. To address all of these issues, we have now created a stand-alone FishBase API with the blessing of the FishBase.org team, who have kindly provided copies of the backend SQL database to our team for this purpose. At this time the API does not cover all tables provided by the SQL backend, but does access the largest and most commonly used. A list of all tables available from the API (and from rfishbase) can be seen using the <code>heartbeat()</code> function.</p>
<p>The new <code>rfishbase</code> package queries this API directly rather than the FishBase.org website. This reduces load on the FishBase web servers and increases both the performance and the breadth of data avaialble. <code>rfishbase</code> functions are primarily aimed at facilitating queries for specific data across a given list of many species. This is a task that is common to much scientific research and tedious to perform on the FishBase.org website, which requires a user to visit a separate page for each species. Aimed at scientific use, the <code>rfishbase</code> package returns all data as <code>data.frames</code>, usually organized in “tidy data” style with individual species as rows and observations of species traits as columns (also referred to as fields). Users will frequently have to subset the resulting data frames, or join them with other data frames provided by the package, to obtain the data they need. We recommend the <code>dplyr</code> package to facilitate these tasks, which <code>rfishbase</code> also uses internally.</p>
<p>In having access to much more data, the new <code>rfishbase</code> can be difficult to navigate. We have provided several helper functions for users to discover which tables they need, as illustrated below. Unfortunately, FishBase.org lacks detailed documentation of all of the tables and fields contained in it’s database. For the most part, table and column names are self-documenting, but details are often missing which can create a puzzle for researchers trying to figure out precisely what data is provided in a given column. To address this challenge, we have created a crowd-sourced collection of documentation that can be queried from the API to provide more detailed descriptions.</p>
<p>We welcome any feedback, issues or questions that users may encounter through our issues tracker on GitHub: [<a href="https://github.com/ropensci/rfishbase/issues" class="uri">https://github.com/ropensci/rfishbase/issues</a>].</p>
<div id="installation" class="section level2">
<h2>Installation</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;rfishbase&quot;</span>, 
                 <span class="dt">repos =</span> <span class="kw">c</span>(<span class="st">&quot;http://packages.ropensci.org&quot;</span>, <span class="st">&quot;http://cran.rstudio.com&quot;</span>), 
                 <span class="dt">type=</span><span class="st">&quot;source&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;rfishbase&quot;</span>)</code></pre></div>
</div>
<div id="getting-started" class="section level2">
<h2>Getting started</h2>
<p><a href="http://fishbase.org">FishBase</a> makes it relatively easy to look up a lot of information on most known species of fish. However, looking up a single bit of data, such as the estimated trophic level, for many different species becomes tedious very soon. This is a common reason for using <code>rfishbase</code>. As such, our first step is to assemble a good list of species we are interested in.</p>
<div id="building-a-species-list" class="section level3">
<h3>Building a species list</h3>
<p>Almost all functions in <code>rfishbase</code> take a list (character vector) of species scientific names, for example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fish &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Oreochromis niloticus&quot;</span>, <span class="st">&quot;Salmo trutta&quot;</span>)</code></pre></div>
<p>You can also read in a list of names from any existing data you are working with. When providing your own species list, you should always begin by validating the names. Taxonomy is a moving target, and this well help align the scientific names you are using with the names used by FishBase, and alert you to any potential issues:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fish &lt;-<span class="st"> </span><span class="kw">validate_names</span>(<span class="kw">c</span>(<span class="st">&quot;Oreochromis niloticus&quot;</span>, <span class="st">&quot;Salmo trutta&quot;</span>))</code></pre></div>
<p>Another typical use case is in wanting to collect information about all species in a particular taxonomic group, such as a Genus, Family or Order. The function <code>species_list</code> recognizes six taxonomic levels, and can help you generate a list of names of all species in a given group:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fish &lt;-<span class="st"> </span><span class="kw">species_list</span>(<span class="dt">Genus =</span> <span class="st">&quot;Labroides&quot;</span>)
fish</code></pre></div>
<pre><code>[1] &quot;Labroides bicolor&quot;       &quot;Labroides dimidiatus&quot;   
[3] &quot;Labroides pectoralis&quot;    &quot;Labroides phthirophagus&quot;
[5] &quot;Labroides rubrolabiatus&quot;</code></pre>
<p><code>rfishbase</code> also recognizes common names. When a common name refers to multiple species, all matching species are returned:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fish &lt;-<span class="st"> </span><span class="kw">common_to_sci</span>(<span class="st">&quot;trout&quot;</span>)
fish</code></pre></div>
<pre><code>[1] &quot;Salmo trutta&quot;               &quot;Oncorhynchus mykiss&quot;       
[3] &quot;Salvelinus fontinalis&quot;      &quot;Salvelinus alpinus alpinus&quot;
[5] &quot;Lethrinus miniatus&quot;         &quot;Salvelinus malma&quot;          
[7] &quot;Plectropomus leopardus&quot;     &quot;Schizothorax richardsonii&quot; 
[9] &quot;Arripis truttacea&quot;         </code></pre>
<p>Note that there is no need to validate names coming from <code>common_to_sci</code> or <code>species_list</code>, as these will always return valid names.</p>
</div>
<div id="getting-data" class="section level3">
<h3>Getting data</h3>
<p>With a species list in place, we are ready to query fishbase for data. Note that if you have a very long list of species, it is always a good idea to try out your intended functions with a subset of that list first to make sure everything is working.</p>
<p>The <code>species()</code> function returns a table containing much (but not all) of the information found on the summary or homepage for a species on <a href="http://fishbase.org">fishbase.org</a>. <code>rfishbase</code> functions always return <a href="http://www.jstatsoft.org/v59/i10/paper">tidy</a> data tables: rows are observations (e.g. a species, individual samples from a species) and columns are variables (fields).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">species</span>(fish[<span class="dv">1</span>:<span class="dv">2</span>])</code></pre></div>
<pre><code>              sciname        Genus Species SpeciesRefNo          Author
1        Salmo trutta        Salmo  trutta         4779  Linnaeus, 1758
2 Oncorhynchus mykiss Oncorhynchus  mykiss         4706 (Walbaum, 1792)
         FBname PicPreferredName PicPreferredNameM PicPreferredNameF
1     Sea trout     Satru_u2.jpg                NA                NA
2 Rainbow trout     Onmyk_f0.jpg                NA                NA
  PicPreferredNameJ FamCode  Subfamily GenCode SubGenCode
1      Satru_uc.jpg      76 Salmoninae    6009         NA
2              &lt;NA&gt;      76 Salmoninae    2445         NA
         BodyShapeI Source AuthorRef Remark TaxIssue Fresh Brack Saltwater
1 fusiform / normal      R        NA     NA        0    -1    -1        -1
2 fusiform / normal      R        NA     NA        0    -1    -1        -1
      DemersPelag     AnaCat MigratRef DepthRangeShallow DepthRangeDeep
1 pelagic-neritic anadromous     51243                 0             NA
2   benthopelagic anadromous     51243                 0            200
  DepthRangeRef DepthRangeComShallow DepthRangeComDeep DepthComRef
1            NA                   NA                10          NA
2         50550                   NA                NA          NA
  LongevityWild LongevityWildRef LongevityCaptive LongevityCapRef
1            38            32682             10.3             274
2            11            12193              4.0             273
  Vulnerability Length LTypeMaxM LengthFemale LTypeMaxF MaxLengthRef
1         59.96    140        SL           NA        NA          682
2         36.29    122        TL           NA        NA        96339
  CommonLength LTypeComM CommonLengthF LTypeComF CommonLengthRef Weight
1           72        TL            NA        NA            3397  50000
2           60        TL            NA        NA            5504  25400
  WeightFemale MaxWeightRef      Pic PictureFemale LarvaPic EggPic
1           NA          682 SATRU_U2            NA       NA     NA
2           NA         7251 ONMYK_U2            NA       NA     NA
  ImportanceRef        Importance PriceCateg
1          4931        commercial  very high
2          4931 highly commercial        low
                                     PriceReliability             Remarks7
1 Reliable: based on ex-vessel price for this species                 &lt;NA&gt;
2 Reliable: based on ex-vessel price for this species Important game fish.
        LandingStatistics           Landings MainCatchingMethod II MSeines
1    from 1,000 to 10,000 Finland in area 27             seines          0
2 from 100,000 to 500,000               &lt;NA&gt;    hooks and lines          0
  MGillnets MCastnets MTraps MSpears MTrawls MDredges MLiftnets
1        -1         0     -1       0       0        0         0
2        -1         0      0       0       0        0         0
  MHooksLines MOther UsedforAquaculture
1          -1      0         commercial
2          -1      0         commercial
                                LifeCycle AquacultureRef   UsedasBait
1                                                  12228 never/rarely
2 life cycle closed in commercial culture          12108 never/rarely
  BaitRef     Aquarium           AquariumFishII AquariumRef GameFish
1      NA never/rarely based mainly on breeding         274       -1
2      NA never/rarely  based mainly on capture        9183       -1
  GameRef      Dangerous DangerousRef       Electrogenic ElectroRef
1    4699 potential pest           NA no special ability         NA
2    4699 potential pest           NA no special ability         NA
  Complete GoogleImage
1       NA          -1
2       NA          -1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Comments
1 Found in streams, ponds, rivers and lakes (Ref. 5951).  Individuals spend 1 to 5 years in fresh water and 6 months to 5 years in salt water (Ref. 51442).  Juveniles mature in 3-4 years (Ref. 6885).  Lacustrine populations undertake migration to tributaries and lake outlets to spawn, rarely spawning on stone, wave-washed lake shores.  Spawns in rivers and streams with swift current, usually characterized by downward movement of water intro gravel (Ref. 59043).  Spawning takes place normally more than one time (Ref. 51442).  They prefer cold, well-oxygenated upland waters although their tolerance limits are lower than those of rainbow trout and favors large streams in the mountainous areas with adequate cover in the form of submerged rocks, undercut banks, and overhanging vegetation (Ref. 6465).  Life history and spawning behavior is similar to the salmon &lt;i&gt;Salmo salar&lt;/i&gt; (Ref. 51442).  Each female produces about 10.000 eggs (Ref. 35388, Ref. 51442).  Mainly diurnal (Ref. 682).  Sea and lake trouts forage in pelagic and littoral habitats, while sea trouts mainly close to coast, not very far from estuary of natal river (Ref. 59043).  Juveniles feed mainly on aquatic and terrestrial insects; adults on mollusks, crustaceans and small fish (Ref. 26523, Ref. 51442).  Marketed fresh and smoked; eaten fried, broiled, boiled, cooked in microwave, and baked (Ref. 9988).
2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Adults inhabit cold headwaters, creeks, small to large rivers, and lakes.  Anadromous in coastal streams (Ref. 5723).  Stocked in almost all water bodies as lakes, rivers and streams, usually not stocked in water reaching summer temperatures above 25°C or ponds with very low oxygen concentrations.  Feed on a variety of aquatic and terrestrial invertebrates and small fishes. At the sea, they prey on fish and cephalopods.  Mature individuals undertake short spawning migrations.  Anadromous and lake forms may migrate long distances to spawning streams (Ref. 59043). Utilized fresh, smoked, canned, and frozen; eaten steamed, fried, broiled, boiled, microwaved and baked (Ref. 9988).  Cultured in many countries and is often hatched and stocked into rivers and lakes especially to attract recreational fishers (Ref. 9988).
  Profile PD50 Emblematic Entered              DateEntered Modified
1      NA  0.5          0       2 1990-10-17T00:00:00.000Z       10
2      NA  0.5          0       2 1990-10-17T00:00:00.000Z     2291
              DateModified Expert              DateChecked TS SpecCode
1 2013-09-13T00:00:00.000Z     97 2003-01-03T00:00:00.000Z NA      238
2 2014-12-16T00:00:00.000Z     97 2003-01-15T00:00:00.000Z NA      239</code></pre>
<p>Most tables contain many fields. To avoid overly cluttering the screen, <code>rfishbase</code> displays tables as <code>data_frame</code> objects from the <code>dplyr</code> package. These act just like the familiar <code>data.frames</code> of base R except that they print to the screen in a more tidy fashion. Note that columns that cannot fit easily in the display are summarized below the table. This gives us an easy way to see what fields are available in a given table. For instance, from this table we may only be interested in the <code>PriceCateg</code> (Price category) and the <code>Vulnerability</code> of the species. We can repeat the query for our full species list, asking for only these fields to be returned:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw">species</span>(fish, <span class="dt">fields=</span><span class="kw">c</span>(<span class="st">&quot;SpecCode&quot;</span>, <span class="st">&quot;PriceCateg&quot;</span>, <span class="st">&quot;Vulnerability&quot;</span>))
dat</code></pre></div>
<pre><code>                     sciname Vulnerability PriceCateg SpecCode
1               Salmo trutta         59.96  very high      238
2        Oncorhynchus mykiss         36.29        low      239
3      Salvelinus fontinalis         43.37  very high      246
4 Salvelinus alpinus alpinus         74.33  very high      247
5         Lethrinus miniatus         52.78  very high     1858
6           Salvelinus malma         69.97  very high     2691
7     Plectropomus leopardus         51.04  very high     4826
8  Schizothorax richardsonii         34.78    unknown     8705
9          Arripis truttacea         47.96    unknown    14606</code></pre>
</div>
<div id="fishbase-docs-discovering-data" class="section level3">
<h3>FishBase Docs: Discovering data</h3>
<p>Unfortunately identifying what fields come from which tables is often a challenge. Each summary page on fishbase.org includes a list of additional tables with more information about species ecology, diet, occurrences, and many other things. <code>rfishbase</code> provides functions that correspond to most of these tables.</p>
<p>Because <code>rfishbase</code> accesses the back end database, it does not always line up with the web display. Frequently <code>rfishbase</code> functions will return more information than is available on the web versions of the these tables. Some information found on the summary homepage for a species is not available from the <code>species</code> summary function, but must be extracted from a different table. For instance, the species <code>Resilience</code> information is not one of the fields in the <code>species</code> summary table, despite appearing on the species homepage of fishbase.org. To discover which table this information is in, we can use the special <code>rfishbase</code> function <code>list_fields</code>, which will list all tables with a field matching the query string:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list_fields</span>(<span class="st">&quot;Resilience&quot;</span>)</code></pre></div>
<p>This shows us that this information appears on the <code>stocks</code> table. Working in R, it is easy to query this additional table and combine the results with the data we have collected so far:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">resil &lt;-<span class="st"> </span><span class="kw">stocks</span>(fish, <span class="dt">fields=</span><span class="st">&quot;Resilience&quot;</span>)
<span class="kw">merge</span>(dat, resil)</code></pre></div>
<pre><code>                      sciname SpecCode Vulnerability PriceCateg Resilience
1           Arripis truttacea    14606         47.96    unknown     Medium
2          Lethrinus miniatus     1858         52.78  very high     Medium
3         Oncorhynchus mykiss      239         36.29        low     Medium
4      Plectropomus leopardus     4826         51.04  very high     Medium
5                Salmo trutta      238         59.96  very high       High
6                Salmo trutta      238         59.96  very high       &lt;NA&gt;
7                Salmo trutta      238         59.96  very high     Medium
8                Salmo trutta      238         59.96  very high        Low
9                Salmo trutta      238         59.96  very high       &lt;NA&gt;
10               Salmo trutta      238         59.96  very high       &lt;NA&gt;
11               Salmo trutta      238         59.96  very high       &lt;NA&gt;
12 Salvelinus alpinus alpinus      247         74.33  very high        Low
13      Salvelinus fontinalis      246         43.37  very high     Medium
14           Salvelinus malma     2691         69.97  very high        Low
15           Salvelinus malma     2691         69.97  very high       &lt;NA&gt;
16  Schizothorax richardsonii     8705         34.78    unknown     Medium</code></pre>
<p>Sometimes it is more useful to search for a broad description of the tables.</p>
</div>
</div>
<div id="sealifebase" class="section level2">
<h2>SeaLifeBase</h2>
<p>The FishBase team has also created the SeaLifeBase project, which seeks to provide much the same data and layout as fishbase.org and the fishbase schema, but covering all sea life apart from the finfish covered in FishBase. The rOpenSci team has created a pilot API for SeaLifeBase as well. Most of the functions in <code>rfishbase</code> can be used directly to query SeaLifeBase data by explicitly specifying the <code>server</code> argument to use the SeaLifeBase API at <code>http://fishbase.ropensci.org/sealifebase</code>, like so:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">options</span>(<span class="dt">FISHBASE_API =</span> <span class="st">&quot;http://fishbase.ropensci.org/sealifebase&quot;</span>)
kingcrab &lt;-<span class="st"> </span><span class="kw">common_to_sci</span>(<span class="st">&quot;king crab&quot;</span>)
kingcrab</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">species</span>(kingcrab)
<span class="kw">ecology</span>(kingcrab)</code></pre></div>
<p>Set the API back to <code>fishbase</code> for finfish data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">options</span>(<span class="dt">FISHBASE_API =</span> <span class="st">&quot;http://fishbase.ropensci.org&quot;</span>)</code></pre></div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
